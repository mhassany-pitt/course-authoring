{
  "id": "6954bccff9187b06cf837432",
  "user_email": "moh70@pitt.edu",
  "status": "public",
  "listed_at": "2016-09-16T14:07:44.000Z",
  "updated_at": "2026-01-17T20:33:59.924Z",
  "tags": [],
  "identity": {
    "id": "post_servlet",
    "title": "ISD::HTTPPostServlet.java",
    "type": "Example"
  },
  "links": {
    "demo_url": "https://acos.cs.vt.edu/html/annotated/acos-annex-java/post_servlet"
  },
  "attribution": {
    "created_at": "2016-09-16T14:07:44.000Z",
    "provider": "WebEx",
    "publisher": "",
    "authors": [
      {
        "name": "Unknown",
        "affiliation": ""
      }
    ]
  },
  "languages": {
    "content_language": "en",
    "programming_languages": [
      "Java"
    ]
  },
  "content": {
    "prompt": "",
    "source_code": "// Fig. 19.7: HTTPPostServlet.java\n\n// A simple survey servlet\n\nimport javax.servlet.*;\n\nimport javax.servlet.http.*;\n\nimport java.text.*;\n\nimport java.io.*;\n\nimport java.util.*;\n\n\n\npublic class HTTPPostServlet extends HttpServlet {\n   private String animalNames[] =\n      { \"dog\", \"cat\", \"bird\", \"snake\", \"none\" };\n\n\n\n   public void doPost( HttpServletRequest request,\n                       HttpServletResponse response )\n      throws ServletException, IOException\n   {\n      int animals[] = null, total = 0;\n      File f = new File( \"survey.txt\" );\n\n\n      if ( f.exists() ) {\n         // Determine # of survey responses so far\n         try {\n            ObjectInputStream input = new ObjectInputStream(\n               new FileInputStream( f ) );\n\n\n            animals = (int []) input.readObject();\n            input.close();   // close stream\n\n\n            for ( int i = 0; i < animals.length; ++i )\n               total += animals[ i ];\n         }\n         catch( ClassNotFoundException cnfe ) {\n\t            cnfe.printStackTrace();\n         }\n      }\n      else\n         animals = new int[ 5 ];\n\n\n      // read current survey response\n      String value =\n         request.getParameter( \"animal\" );\n      ++total;   // update total of all responses\n\n\n      // determine which was selected and update its total\n      for ( int i = 0; i < animalNames.length; ++i )\n         if ( value.equals( animalNames[ i ] ) )\n            ++animals[ i ];\n\n\n      // write updated totals out to disk\n      ObjectOutputStream output = new ObjectOutputStream(\n         new FileOutputStream( f ) );\n\n\n      output.writeObject( animals );\n      output.flush();\n      output.close();\n\n\n      // Calculate percentages\n      double percentages[] = new double[ animals.length ];\n\n\n      for ( int i = 0; i < percentages.length; ++i )\n         percentages[ i ] = 100.0 * animals[ i ] / total;\n\n\n      // send a thank you message to client\n      response.setContentType( \"text/html\" ); // content type\n\n\n      PrintWriter responseOutput = response.getWriter();\n      StringBuffer buf = new StringBuffer();\n      buf.append( \"<html>\\n\" );\n      buf.append( \"<title>Thank you!</title>\\n\" );\n      buf.append( \"Thank you for participating.\\n\" );\n      buf.append( \"<BR>Results:\\n<PRE>\" );\n\n\n      DecimalFormat twoDigits = new DecimalFormat(\"#0.00\" );\n      for ( int i = 0; i < percentages.length; ++i ) {\n         buf.append( \"<BR>\" );\n         buf.append( animalNames[ i ] );\n         buf.append( \": \" );\n         buf.append( twoDigits.format( percentages[ i ] ) );\n         buf.append( \"%  responses: \" );\n         buf.append( animals[ i ] );\n         buf.append( \"\\n\" );\n      }\n\n\n      buf.append( \"\\n<BR><BR>Total responses: \" );\n      buf.append( total );\n      buf.append( \"</PRE>\\n</html>\" );\n\n\n      responseOutput.println( buf.toString() );\n      responseOutput.close();\n   }\n\n}"
  },
  "classification": {
    "topics": [],
    "difficulty": ""
  },
  "pedagogy": {
    "learning_objectives": [],
    "instructional_role": "",
    "prerequisites": {
      "topics": [],
      "concepts": [],
      "item_ids": []
    }
  },
  "interaction": {
    "interaction_type": ""
  },
  "delivery": [
    {
      "format": "html",
      "url": "https://acos.cs.vt.edu/html/annotated/acos-annex-java/post_servlet"
    }
  ],
  "rights": {
    "license": "MIT",
    "license_url": "",
    "usage_notes": ""
  },
  "uses": [],
  "created_at": "2025-12-31T06:04:00.130Z"
}